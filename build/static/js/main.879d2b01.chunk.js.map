{"version":3,"sources":["components/SearchBar.js","components/CountryList.js","components/pages/Home.js","services/emissions.js","components/PerCapitaToggle.js","components/pages/NotFound.js","components/CountryData.js","components/pages/Country.js","components/NavBar.js","App.js","index.js"],"names":["SearchBar","_ref","setSearch","react_default","a","createElement","Input","fluid","action","icon","placeholder","onChange","event","target","value","CountryList","countries","search","items","filter","country","noSearch","nameMatches","name","toLowerCase","includes","map","List","Item","key","Link","to","concat","Card","Content","Home","_useState","useState","_useState2","Object","slicedToArray","components_SearchBar","components_CountryList","baseUrl","emissions","axios","get","then","response","data","post","PerCapitaCheckbox","togglePerCapita","Checkbox","toggle","label","NotFound","style","marginTop","textAlign","CountryData","perCapita","elems","keys","sort","b","year","pop","population","co2","toFixed","Table","Row","Cell","striped","Header","HeaderCell","Body","Country","countryKey","undefined","setData","useEffect","dataService","result","catch","_","pages_NotFound","padding","PerCapitaToggle","components_CountryData","yearlyData","withRouter","location","refreshing","handleRefresh","Menu","stackable","active","pathname","position","onClick","Loader","inline","size","marginRight","App","setRefreshing","_useState3","_useState4","setCountries","_useState5","_useState6","setPerCapita","emissionService","obj","countryData","height","background","Grid","centered","columns","Column","boxShadow","width","BrowserRouter","components_NavBar","updatedData","error","console","log","Switch","Route","exact","path","render","pages_Home","match","pages_Country","params","component","ReactDOM","src_App","document","getElementById"],"mappings":"iOAYeA,EATG,SAAAC,GAAA,IAAGC,EAAHD,EAAGC,UAAH,OAChBC,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAACC,EAAA,EAAD,CAAOC,OAAK,EACVC,OAAQ,CAAEC,KAAM,UAChBC,YAAY,YACZC,SAAU,SAACC,GAAD,OAAWV,EAAUU,EAAMC,OAAOC,uCCkBnCC,EAtBK,SAAAd,GAA2B,IAAxBe,EAAwBf,EAAxBe,UAAWC,EAAahB,EAAbgB,OAM1BC,EALWF,EAAUG,OAAO,SAAAC,GAChC,IAAMC,EAAsB,KAAXJ,EACXK,EAAcF,EAAQG,KAAKC,cAAcC,SAASR,EAAOO,eAC/D,OAAOH,GAAYC,IAEEI,IAAI,SAAAN,GAAO,OAChCjB,EAAAC,EAAAC,cAACsB,EAAA,EAAKC,KAAN,CAAWC,IAAKT,EAAQS,KACtB1B,EAAAC,EAAAC,cAACyB,EAAA,EAAD,CAAMC,GAAE,YAAAC,OAAcZ,EAAQS,MAC5B1B,EAAAC,EAAAC,cAAC4B,EAAA,EAAD,CAAM1B,OAAK,GACTJ,EAAAC,EAAAC,cAAC4B,EAAA,EAAKC,QAAN,KAAed,EAAQG,WAK/B,OACEpB,EAAAC,EAAAC,cAACsB,EAAA,EAAD,KACGT,ICLQiB,EAZF,SAAAlC,GAAmB,IAAhBe,EAAgBf,EAAhBe,UAAgBoB,EACFC,mBAAS,IADPC,EAAAC,OAAAC,EAAA,EAAAD,CAAAH,EAAA,GACvBnB,EADuBqB,EAAA,GACfpC,EADeoC,EAAA,GAG9B,OACEnC,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,2BACAF,EAAAC,EAAAC,cAACoC,EAAD,CAAWvC,UAAWA,IACtBC,EAAAC,EAAAC,cAACqC,EAAD,CAAa1B,UAAWA,EAAWC,OAAQA,uBCT3C0B,EAAU,iBAkBDC,EAhBC,WACd,OAAOC,IAAMC,IAAIH,GAASI,KAAK,SAAAC,GAAQ,OAAIA,EAASC,QAevCL,EAZQ,SAACf,GACtB,OAAOgB,IAAMC,IAAN,GAAAd,OAAaW,EAAb,KAAAX,OAAwBH,IAAOkB,KAAK,SAAAC,GAAQ,OAAIA,EAASC,QAWnDL,EAJK,WAClB,OAAOC,IAAMK,KAAN,GAAAlB,OAAcW,EAAd,YAAgCI,KAAK,SAAAC,GAAQ,OAAIA,EAASC,iBCNpDE,EARW,SAAAlD,GAAA,IAAGmD,EAAHnD,EAAGmD,gBAAH,OACxBjD,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAACgD,EAAA,EAAD,CAAUC,QAAM,EACdC,MAAO,aACP5C,SAAUyC,MCWDI,EAfE,WAKf,OACErD,EAAAC,EAAAC,cAAA,OAAKoD,MALO,CACZC,UAAW,GACXC,UAAW,WAITxD,EAAAC,EAAAC,cAAA,2BACAF,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAACyB,EAAA,EAAD,CAAMC,GAAG,KAAT,2BC4BO6B,EArCK,SAAA3D,GAAyB,IAAtBgD,EAAsBhD,EAAtBgD,KAAMY,EAAgB5D,EAAhB4D,UAErBC,EADQvB,OAAOwB,KAAKd,GAAMe,KAAK,SAAC5D,EAAG6D,GAAJ,OAAUA,EAAI7D,IAC/BsB,IAAI,SAAAwC,GACtB,IAAMC,EAAMlB,EAAKiB,GAAME,WACnBC,EAAMpB,EAAKiB,GAAMtB,UAErB,OAAY,OAARuB,GAAwB,OAARE,EACX,MAELR,GAAqB,OAARQ,IACfA,EAAa,MAAPF,EAAc,OAAS,IAAOE,EAAMF,GAAKG,QAAQ,IAGvDnE,EAAAC,EAAAC,cAACkE,EAAA,EAAMC,IAAP,CAAW3C,IAAKqC,GACd/D,EAAAC,EAAAC,cAACkE,EAAA,EAAME,KAAP,KAAaP,GACb/D,EAAAC,EAAAC,cAACkE,EAAA,EAAME,KAAP,KAAqB,OAARN,EAAe,MAAQA,GACpChE,EAAAC,EAAAC,cAACkE,EAAA,EAAME,KAAP,KAAqB,OAARJ,EAAe,MAAQA,OAK1C,OACElE,EAAAC,EAAAC,cAACkE,EAAA,EAAD,CAAOG,SAAO,GACZvE,EAAAC,EAAAC,cAACkE,EAAA,EAAMI,OAAP,KACExE,EAAAC,EAAAC,cAACkE,EAAA,EAAMC,IAAP,KACErE,EAAAC,EAAAC,cAACkE,EAAA,EAAMK,WAAP,aACAzE,EAAAC,EAAAC,cAACkE,EAAA,EAAMK,WAAP,mBACAzE,EAAAC,EAAAC,cAACkE,EAAA,EAAMK,WAAP,mBAA8Bf,EAAY,WAAa,KAAvD,OAGJ1D,EAAAC,EAAAC,cAACkE,EAAA,EAAMM,KAAP,KACGf,KCcMgB,EA1CC,SAAA7E,GAAgD,IAA7C8E,EAA6C9E,EAA7C8E,WAAYlB,EAAiC5D,EAAjC4D,UAAWT,EAAsBnD,EAAtBmD,gBAAsBhB,EACtCC,wBAAS2C,GAD6B1C,EAAAC,OAAAC,EAAA,EAAAD,CAAAH,EAAA,GACvDa,EADuDX,EAAA,GACjD2C,EADiD3C,EAAA,GAG9D4C,oBAAU,WACHH,EAGHI,EAA2BJ,GACxBhC,KAAK,SAAAqC,GACJH,EAAQG,KAETC,MAAM,SAAAC,GAAC,OAAIL,EAAQ,QANtBA,EAAQ,OAQT,CAAEF,IAsBL,OACE5E,EAAAC,EAAAC,cAAA,gBApBa2E,IAAT/B,EACK,KACI,OAATA,EACK9C,EAAAC,EAAAC,cAACkF,EAAD,MAQPpF,EAAAC,EAAAC,cAAA,OAAKoD,MANO,CACZC,UAAW,GACX8B,QAAS,IAKPrF,EAAAC,EAAAC,cAAA,sBAAc4C,EAAK1B,KAAnB,KAA2B0B,EAAKpB,IAAhC,KACA1B,EAAAC,EAAAC,cAACoF,EAAD,CAAiBrC,gBAAiBA,IAClCjD,EAAAC,EAAAC,cAACqF,EAAD,CAAazC,KAAMA,EAAK0C,WAAY9B,UAAWA,kCCZxC+B,cApBA,SAAA3F,GAA4C,IAAzC4F,EAAyC5F,EAAzC4F,SAAUC,EAA+B7F,EAA/B6F,WAAYC,EAAmB9F,EAAnB8F,cACtC,OACE5F,EAAAC,EAAAC,cAAC2F,EAAA,EAAD,CAAMC,WAAS,GACb9F,EAAAC,EAAAC,cAAC2F,EAAA,EAAKpE,KAAN,CAAWsE,OAA8B,MAAtBL,EAASM,UAC1BhG,EAAAC,EAAAC,cAACyB,EAAA,EAAD,CAAMC,GAAG,KAAT,SAEF5B,EAAAC,EAAAC,cAAC2F,EAAA,EAAKpE,KAAN,KACEzB,EAAAC,EAAAC,cAACyB,EAAA,EAAD,CAAMC,GAAG,oBAAT,YAEF5B,EAAAC,EAAAC,cAAC2F,EAAA,EAAKpE,KAAN,CAAWwE,SAAS,QAAQC,QAASN,GACnC5F,EAAAC,EAAAC,cAACiG,EAAA,EAAD,CAAQC,QAAM,EACZL,OAAQJ,EACRU,KAAK,OACL/C,MAAO,CAAEgD,YAAa,MACxBtG,EAAAC,EAAAC,cAAA,0BC2EOqG,EAjFH,WAAM,IAAAtE,EACoBC,oBAAS,GAD7BC,EAAAC,OAAAC,EAAA,EAAAD,CAAAH,EAAA,GACT0D,EADSxD,EAAA,GACGqE,EADHrE,EAAA,GAAAsE,EAEkBvE,mBAAS,IAF3BwE,EAAAtE,OAAAC,EAAA,EAAAD,CAAAqE,EAAA,GAET5F,EAFS6F,EAAA,GAEEC,EAFFD,EAAA,GAAAE,EAGkB1E,oBAAS,GAH3B2E,EAAAzE,OAAAC,EAAA,EAAAD,CAAAwE,EAAA,GAGTlD,EAHSmD,EAAA,GAGEC,EAHFD,EAAA,GAKhB9B,oBAAU,WACRgC,IACGnE,KAAK,SAAAoE,GACJ,IAAMC,EAAc7E,OAAOwB,KAAKoD,GAAKzF,IAAI,SAAAG,GACvC,MAAO,CACLA,MACAN,KAAM4F,EAAItF,GAAKN,QAGnBuF,EAAaM,MAEhB,IAEH,IAAMhE,EAAkB,WAAQ6D,GAAcpD,IAgC9C,OACE1D,EAAAC,EAAAC,cAAA,OAAKoD,MANiB,CACtB4D,OAAQ,QACRC,WAAY,YAKVnH,EAAAC,EAAAC,cAACkH,EAAA,EAAD,CAAMC,UAAQ,EAACC,QAAS,GACtBtH,EAAAC,EAAAC,cAACkH,EAAA,EAAKG,OAAN,CAAajE,MAdC,CAClB+B,QAAS,GACT8B,WAAY,UACZK,UAAW,oEAW0BC,MAAO,IACtCzH,EAAAC,EAAAC,cAACwH,EAAA,EAAD,KACE1H,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAACyH,EAAD,CACEhC,WAAYA,EACZC,cAtCQ,WAChBD,IAEJa,GAAc,GAEdO,IACCnE,KAAK,SAAAgF,GACJ,IAAMX,EAAc7E,OAAOwB,KAAKgE,GAAarG,IAAI,SAAAG,GAC/C,MAAO,CACLA,MACAN,KAAMwG,EAAYlG,GAAKN,QAG3BuF,EAAaM,KAEd/B,MAAM,SAAA2C,GAAK,OAAIC,QAAQC,IAAIF,KAC3BjF,KAAK,kBAAM4D,GAAc,SAuBhBxG,EAAAC,EAAAC,cAAC8H,EAAA,EAAD,KACEhI,EAAAC,EAAAC,cAAC+H,EAAA,EAAD,CAAOC,OAAK,EAACC,KAAK,IAAIC,OAAQ,kBAC5BpI,EAAAC,EAAAC,cAACmI,EAAD,CACExH,UAAWA,EACXoC,gBAAiBA,OAErBjD,EAAAC,EAAAC,cAAC+H,EAAA,EAAD,CAAOC,OAAK,EAACC,KAAK,gBAAgBC,OAAQ,SAAAtI,GAAA,IAAGwI,EAAHxI,EAAGwI,MAAH,OACxCtI,EAAAC,EAAAC,cAACqI,EAAD,CACE3D,WAAY0D,EAAME,OAAO9G,IACzBgC,UAAWA,EACXT,gBAAiBA,OAErBjD,EAAAC,EAAAC,cAAC+H,EAAA,EAAD,CAAOQ,UAAWpF,WC/ElCqF,IAASN,OAAOpI,EAAAC,EAAAC,cAACyI,EAAD,MAASC,SAASC,eAAe","file":"static/js/main.879d2b01.chunk.js","sourcesContent":["import React from 'react'\nimport { Input } from 'semantic-ui-react'\n\nconst SearchBar = ({ setSearch }) => (\n  <div>\n    <Input fluid\n      action={{ icon: 'search' }}\n      placeholder='Search...'\n      onChange={(event) => setSearch(event.target.value)} />\n  </div>\n)\n\nexport default SearchBar","import React from 'react'\nimport { Link } from 'react-router-dom'\nimport { List, Card } from 'semantic-ui-react'\n\nconst CountryList = ({ countries, search }) => {\n  const filtered = countries.filter(country => {\n    const noSearch = search === ''\n    const nameMatches = country.name.toLowerCase().includes(search.toLowerCase())\n    return noSearch || nameMatches\n  })\n  const items = filtered.map(country => (\n    <List.Item key={country.key}>\n      <Link to={`/country/${country.key}`}>\n        <Card fluid>\n          <Card.Content>{country.name}</Card.Content>\n        </Card>\n      </Link>\n    </List.Item>\n  ))\n  return (\n    <List>\n      {items}\n    </List>\n  )\n}\n\nexport default CountryList","import React, { useState } from 'react'\nimport SearchBar from '../SearchBar';\nimport CountryList from '../CountryList';\n\nconst Home = ({ countries }) => {\n  const [search, setSearch] = useState('')\n\n  return (\n    <div>\n      <h1>CO2-emissions</h1>\n      <SearchBar setSearch={setSearch} />\n      <CountryList countries={countries} search={search} />\n    </div>\n  )\n}\n\nexport default Home","import axios from 'axios'\n\nconst baseUrl = '/api/emissions'\n\nconst getData = () => {\n  return axios.get(baseUrl).then(response => response.data)\n}\n\nconst getCountryData = (key) => {\n  return axios.get(`${baseUrl}/${key}`).then(response => response.data)\n}\n\nconst getYearlyCountryData = (key, year) => {\n  return axios.get(`${baseUrl}/${key}/${year}`).then(response => response.data)\n}\n\nconst issueUpdate = () => {\n  return axios.post(`${baseUrl}/update`).then(response => response.data)\n}\n\nexport default {\n  getData,\n  getCountryData,\n  getYearlyCountryData,\n  issueUpdate\n}","import React from 'react'\nimport { Checkbox } from 'semantic-ui-react'\n\nconst PerCapitaCheckbox = ({ togglePerCapita }) => (\n  <div>\n    <Checkbox toggle\n      label={'Per capita'}\n      onChange={togglePerCapita} />\n  </div>\n)\n\nexport default PerCapitaCheckbox","import React from 'react'\nimport { Link } from 'react-router-dom'\n\nconst NotFound = () => {\n  const style = {\n    marginTop: 20,\n    textAlign: 'center',\n  }\n  return (\n    <div style={style}>\n      <h1>404 Not Found</h1>\n      <div>\n        <Link to='/'>Return home</Link>\n      </div>\n    </div>\n  )\n}\n\nexport default NotFound\n","import React from 'react'\nimport { Table } from 'semantic-ui-react'\n\nconst CountryData = ({ data, perCapita }) => {\n  const years = Object.keys(data).sort((a, b) => b - a) // descending order\n  const elems = years.map(year => {\n    const pop = data[year].population\n    let co2 = data[year].emissions\n\n    if (pop === null && co2 === null)\n      return null\n\n    if (perCapita && co2 !== null)\n      co2 = pop == null ? 'N/A' : (1000 * co2 / pop).toFixed(5)\n\n    return (\n      <Table.Row key={year}>\n        <Table.Cell>{year}</Table.Cell>\n        <Table.Cell>{pop === null ? 'N/A' : pop}</Table.Cell>\n        <Table.Cell>{co2 === null ? 'N/A' : co2}</Table.Cell>\n      </Table.Row>\n    )\n  })\n\n  return (\n    <Table striped>\n      <Table.Header>\n        <Table.Row>\n          <Table.HeaderCell>Year</Table.HeaderCell>\n          <Table.HeaderCell>Population</Table.HeaderCell>\n          <Table.HeaderCell>Emissions ({perCapita ? 't/capita' : 'kt'})</Table.HeaderCell>\n        </Table.Row>\n      </Table.Header>\n      <Table.Body>\n        {elems}\n      </Table.Body>\n    </Table>\n  )\n}\n\nexport default CountryData","import React, { useState, useEffect } from 'react'\nimport dataService from '../../services/emissions'\nimport PerCapitaToggle from '../PerCapitaToggle'\nimport NotFound from './NotFound';\nimport CountryData from '../CountryData';\n\nconst Country = ({ countryKey, perCapita, togglePerCapita }) => {\n  const [data, setData] = useState(undefined)\n\n  useEffect(() => {\n    if (!countryKey) {\n      setData(null)\n    } else {\n      dataService.getCountryData(countryKey)\n        .then(result => {\n          setData(result)\n        })\n        .catch(_ => setData(null))\n    }\n  }, [ countryKey ])\n\n  const elem = () => {\n    if (data === undefined)\n      return null\n    if (data === null)\n      return <NotFound />\n\n    const style = {\n      marginTop: 10,\n      padding: 5,\n    }\n\n    return (\n      <div style={style}>\n        <h1>Country: {data.name} ({data.key})</h1>\n        <PerCapitaToggle togglePerCapita={togglePerCapita} />\n        <CountryData data={data.yearlyData} perCapita={perCapita} />\n      </div>\n    )\n  }\n\n  return (\n    <div>\n      {elem()}\n    </div>\n  )\n}\n\nexport default Country","import React from 'react'\nimport { Link, withRouter } from 'react-router-dom'\nimport { Menu, Loader } from 'semantic-ui-react'\n\nconst NavBar = ({ location, refreshing, handleRefresh}) => {\n  return (\n    <Menu stackable>\n      <Menu.Item active={location.pathname === '/'}>\n        <Link to='/'>Home</Link>\n      </Menu.Item>\n      <Menu.Item>\n        <Link to='/country/compare'>Compare</Link>\n      </Menu.Item>\n      <Menu.Item position='right' onClick={handleRefresh}>\n        <Loader inline\n          active={refreshing}\n          size='tiny'\n          style={{ marginRight: 10 }} />\n        <div>Refresh</div>\n      </Menu.Item>\n    </Menu>\n  )\n}\n\nexport default withRouter(NavBar)","import React, { useState, useEffect } from 'react'\nimport { Grid } from 'semantic-ui-react'\nimport {\n  BrowserRouter as Router,\n  Route, Switch\n} from 'react-router-dom'\nimport Home from './components/pages/Home'\nimport Country from './components/pages/Country'\nimport NotFound from './components/pages/NotFound'\nimport NavBar from './components/NavBar'\nimport emissionService from './services/emissions'\n\nconst App = () => {\n  const [refreshing, setRefreshing] = useState(false)\n  const [countries, setCountries] = useState([])\n  const [perCapita, setPerCapita] = useState(false)\n\n  useEffect(() => {\n    emissionService.getData()\n      .then(obj => {\n        const countryData = Object.keys(obj).map(key => {\n          return {\n            key,\n            name: obj[key].name\n          }\n        })\n        setCountries(countryData)\n      })\n  }, [])\n\n  const togglePerCapita = () => { setPerCapita(!perCapita) }\n\n  const handleRefresh = () => {\n    if (refreshing)\n      return\n    setRefreshing(true)\n\n    emissionService.issueUpdate()\n    .then(updatedData => {\n      const countryData = Object.keys(updatedData).map(key => {\n        return {\n          key,\n          name: updatedData[key].name\n        }\n      })\n      setCountries(countryData)\n    })\n    .catch(error => console.log(error))\n    .then(() => setRefreshing(false))\n  }\n\n  const columnStyle = {\n    padding: 40,\n    background: '#dbe8ff',\n    boxShadow: '-2px -2px 5px rgba(0, 0, 0, 0.2), 2px 2px 2px rgba(0, 0, 0, 0.2)'\n  }\n\n  const backgroundStyle = {\n    height: '100vh',\n    background: '#f4f8ff',\n  }\n\n  return (\n    <div style={backgroundStyle}>\n      <Grid centered columns={1}>\n        <Grid.Column style={columnStyle} width={10}>\n          <Router>\n            <div>\n              <NavBar\n                refreshing={refreshing}\n                handleRefresh={handleRefresh} />\n              <Switch>\n                <Route exact path='/' render={() =>\n                  <Home\n                    countries={countries}\n                    togglePerCapita={togglePerCapita} />\n                } />\n                <Route exact path='/country/:key' render={({ match }) =>\n                  <Country\n                    countryKey={match.params.key}\n                    perCapita={perCapita}\n                    togglePerCapita={togglePerCapita} />\n                }/>\n                <Route component={NotFound} />\n              </Switch>\n            </div>\n          </Router>\n        </Grid.Column>\n      </Grid>\n    </div>\n  )\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))"],"sourceRoot":""}